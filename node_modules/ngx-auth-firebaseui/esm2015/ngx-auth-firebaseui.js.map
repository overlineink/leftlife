{"version":3,"file":"ngx-auth-firebaseui.js","sources":["../../tmp/module/services/firestore-sync.service.ts","../../tmp/module/enums/accounts.enum.ts","../../tmp/module/services/auth-process.service.ts","../../tmp/module/components/legality-dialog/legality-dialog.component.ts","../../tmp/module/components/auth/auth.component.ts","../../tmp/module/components/user/user.component.ts","../../tmp/module/components/providers/auth.providers.component.ts","../../tmp/module/components/email-confirmation/email-confirmation.component.ts","../../tmp/module/interfaces/config.interface.ts","../../tmp/module/guards/logged-in.guard.ts","../../tmp/module/ngx-auth-firebase-u-i.module.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument} from '@angular/fire/firestore';\nimport {QueryFn} from '@angular/fire/firestore/interfaces';\nimport {UserInfo} from 'firebase';\n\nexport const collections = {\n  users: 'users',\n};\n\n@Injectable()\nexport class FirestoreSyncService {\n\n  constructor(public afs: AngularFirestore) {\n    // this.afs.firestore.settings({timestampsInSnapshots: true});\n  }\n\n  // get timestamp() {\n  //     return firebase.firestore.FieldValue.serverTimestamp();\n  // }\n\n  public getUserDocRefByUID(uid: string): AngularFirestoreDocument<UserInfo> {\n    return this.afs.doc(`${collections.users}/${uid}`);\n  }\n\n\n  public getUsersCollectionRef(queryFn?: QueryFn): AngularFirestoreCollection<UserInfo> {\n    return this.afs.collection(`${collections.users}/`, queryFn);\n  }\n\n  public deleteUserData(uid: string): Promise<any> {\n    const userRef: AngularFirestoreDocument<UserInfo> = this.getUserDocRefByUID(uid);\n    return userRef.delete();\n  }\n\n\n  public updateUserData(user: UserInfo): Promise<any> {\n    // Sets user$ data to firestore on login\n    const userRef: AngularFirestoreDocument<UserInfo> = this.getUserDocRefByUID(user.uid);\n    const data: UserInfo = {\n      uid: user.uid,\n      email: user.email,\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      phoneNumber: user.phoneNumber,\n      providerId: user.providerId\n    };\n    return userRef.set(data, {merge: true});\n  }\n}\n","export enum Accounts {\n  NONE = 'account',\n  CHECK = 'account-check',\n  EDIT = 'account-edit',\n  OFF = 'account-off',\n  REMOVE = 'account-remove',\n}\n","import {EventEmitter, Inject, Injectable} from '@angular/core';\nimport {MatSnackBar} from '@angular/material';\nimport {AngularFireAuth} from '@angular/fire/auth';\nimport {ICredentials, ISignInProcess, ISignUpProcess} from '../interfaces/main.interface';\nimport {NgxAuthFirebaseUIConfig} from '../interfaces/config.interface';\nimport {FirestoreSyncService} from './firestore-sync.service';\nimport {Accounts} from '../enums';\nimport {firebase} from '@firebase/app';\n\nimport '@firebase/auth';\nimport {User, UserInfo} from 'firebase/app';\nimport {NgxAuthFirebaseUIConfigToken} from '../ngx-auth-firebase-u-i.module';\n// import User = firebase.User;\n\nimport UserCredential = firebase.auth.UserCredential;\n\nexport const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\nexport const twitterAuthProvider = new firebase.auth.TwitterAuthProvider();\nexport const githubAuthProvider = new firebase.auth.GithubAuthProvider();\n\nexport enum AuthProvider {\n  ALL = 'all',\n  ANONYMOUS = 'anonymous',\n  EmailAndPassword = 'firebase',\n  Google = 'google',\n  Facebook = 'facebook',\n  Twitter = 'twitter',\n  Github = 'github',\n  PhoneNumber = 'phoneNumber'\n}\n\n@Injectable()\nexport class AuthProcessService implements ISignInProcess, ISignUpProcess {\n\n  onSuccessEmitter: EventEmitter<any> = new EventEmitter<any>();\n  onErrorEmitter: EventEmitter<any> = new EventEmitter<any>();\n\n  isLoading: boolean;\n  emailConfirmationSent: boolean;\n\n  emailToConfirm: string;\n  messageOnAuthSuccess: string;\n  messageOnAuthError: string;\n\n  constructor(@Inject(NgxAuthFirebaseUIConfigToken)\n              public config: NgxAuthFirebaseUIConfig,\n              public afa: AngularFireAuth,\n              private _snackBar: MatSnackBar,\n              private _fireStoreService: FirestoreSyncService) {\n  }\n\n  /**\n   * Reset the password of the user via email\n   *\n   * @param email - the email to reset\n   * @returns\n   */\n  public resetPassword(email: string) {\n    return this.afa.auth.sendPasswordResetEmail(email)\n      .then(() => console.log('email sent'))\n      .catch((error) => this.onErrorEmitter.next(error));\n  }\n\n  /**\n   * General sign in mechanism to authenticate the users with a firebase project\n   * using a traditional way, via username and password or by using an authentication provider\n   * like google, facebook, twitter and github\n   *\n   * @param provider - the provider to authenticate with (google, facebook, twitter, github)\n   * @param credentials\n   * @returns\n   */\n  public async signInWith(provider: AuthProvider, credentials?: ICredentials) {\n    try {\n      this.isLoading = true;\n      let signInResult: UserCredential | any;\n\n      switch (provider) {\n        case AuthProvider.ANONYMOUS:\n          signInResult = await this.afa.auth.signInAnonymously() as UserCredential;\n          break;\n\n        case AuthProvider.EmailAndPassword:\n          signInResult = await this.afa.auth.signInWithEmailAndPassword(credentials.email, credentials.password) as UserCredential;\n          break;\n\n        case AuthProvider.Google:\n          signInResult = await this.afa.auth.signInWithPopup(googleAuthProvider) as UserCredential;\n          break;\n\n        case AuthProvider.Facebook:\n          signInResult = await this.afa.auth.signInWithPopup(facebookAuthProvider) as UserCredential;\n          break;\n\n        case AuthProvider.Twitter:\n          signInResult = await this.afa.auth.signInWithPopup(twitterAuthProvider) as UserCredential;\n          break;\n\n        case AuthProvider.Github:\n          signInResult = await this.afa.auth.signInWithPopup(githubAuthProvider) as UserCredential;\n          break;\n\n        default:\n          throw new Error(`${AuthProvider[provider]} is not available as auth provider`);\n\n      }\n      await this.handleSuccess(signInResult);\n    } catch (err) {\n      this.handleError(err);\n      console.error(err);\n      // this._snackBar.open(err.message, 'OK', {duration: 5000});\n      this.onErrorEmitter.next(err);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  /**\n   * Sign up new users via email and password.\n   * After that the user should verify and confirm an email sent via the firebase\n   *\n   * @param name - the name if the new user\n   * @param credentials\n   * @returns\n   */\n  public async signUp(name: string, credentials: ICredentials) {\n    try {\n      this.isLoading = true;\n      const userCredential: UserCredential = await this.afa.auth.createUserWithEmailAndPassword(credentials.email, credentials.password);\n      const user = userCredential.user;\n\n      if (this.config.enableFirestoreSync) {\n        await this._fireStoreService\n          .getUserDocRefByUID(user.uid)\n          .set({\n            uid: user.uid,\n            displayName: name,\n            email: user.email,\n            photoURL: user.photoURL\n          } as User);\n\n        await this.updateProfile(name, user.photoURL);\n      }\n\n      await user.sendEmailVerification();\n      this.emailConfirmationSent = true;\n      this.emailToConfirm = credentials.email;\n\n      await this.handleSuccess(userCredential);\n    } catch (err) {\n      this.handleError(err);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  /**\n   * Update the profile (name + photo url) of the authenticated user in the\n   * firebase authentication feature (not in firestore)\n   *\n   * @param name - the new name of the authenticated user\n   * @param photoURL - the new photo url of the authenticated user\n   * @returns\n   */\n  public async updateProfile(name: string, photoURL: string): Promise<any> {\n    return await this.afa.auth.currentUser.updateProfile({displayName: name, photoURL: photoURL});\n  }\n\n  public async deleteAccount(): Promise<any> {\n    return await this.afa.auth.currentUser.delete();\n  }\n\n  public parseUserInfo(user: User): UserInfo {\n    return {\n      uid: user.uid,\n      displayName: user.displayName,\n      email: user.email,\n      phoneNumber: user.phoneNumber,\n      photoURL: user.photoURL,\n      providerId: user.providerData.length > 0 ? user.providerData[0].providerId : null\n    };\n  }\n\n  public getUserPhotoUrl(): string {\n\n    const user: firebase.User | null = this.afa.auth.currentUser;\n\n    if (!user) {\n      return;\n    } else if (user.photoURL) {\n      return user.photoURL;\n    } else if (user.emailVerified) {\n      return this.getPhotoPath(Accounts.CHECK);\n    } else if (user.isAnonymous) {\n      return this.getPhotoPath(Accounts.OFF);\n    } else {\n      return this.getPhotoPath(Accounts.NONE);\n    }\n  }\n\n  public getPhotoPath(image: string) {\n    return `assets/user/${image}.svg`;\n  }\n\n  public signInWithPhoneNumber() {\n    // todo: 3.1.18\n  }\n\n  async handleSuccess(userCredential: UserCredential) {\n    this.onSuccessEmitter.next(userCredential.user);\n    if (this.config.enableFirestoreSync) {\n      try {\n        await this._fireStoreService.updateUserData(this.parseUserInfo(userCredential.user));\n      } catch (e) {\n        console.error(`Error occurred while updating user data with firestore: ${e}`);\n      }\n    }\n\n    if (this.config.toastMessageOnAuthSuccess) {\n      this._snackBar.open(this.messageOnAuthSuccess ? this.messageOnAuthSuccess :\n        `Hello ${userCredential.user.displayName ? userCredential.user.displayName : ''}!`,\n        'OK', {duration: 5000});\n    }\n  }\n\n  handleError(error: any) {\n    this.onErrorEmitter.next(error);\n    if (this.config.toastMessageOnAuthError) {\n      this._snackBar.open(this.messageOnAuthError ? this.messageOnAuthError :\n        error.message, 'OK', {duration: 5000});\n    }\n    console.error(error);\n  }\n\n}\n","import {Component, Inject} from '@angular/core';\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material';\nimport {LegalityDialogParams, LegalityDialogResult} from '../../interfaces/legality.dialog.intreface';\n\n@Component({\n  selector: 'ngx-auth-firebaseui-legality-dialog',\n  template: `\n    <h1 matDialogTitle>Legal requirements</h1>\n\n    <mat-dialog-content>\n      <div fxLayout=\"column\" fxLayoutAlign=\"start\">\n        <mat-checkbox *ngIf=\"this.data.tosUrl\" [(ngModel)]=\"checkTOS\">\n          I agree to the\n          <span>&nbsp;</span>\n          <a target=\"_blank\"\n             [href]=\"this.data.tosUrl\">\n            Terms of Service and Conditions\n          </a>\n        </mat-checkbox>\n\n        <mat-checkbox *ngIf=\"this.data.privacyPolicyUrl\"\n                      [(ngModel)]=\"checkPrivacyPolicy\">\n          I have read and agree to the\n          <span>&nbsp;</span>\n          <a target=\"_blank\"\n             [href]=\"this.data.privacyPolicyUrl\">\n            Privacy\n          </a>\n        </mat-checkbox>\n      </div>\n    </mat-dialog-content>\n\n    <mat-dialog-actions>\n      <button id=\"decline-action\"\n              mat-raised-button\n              matDialogClose\n              color=\"warn\">Decline</button>\n      <button id=\"confirm-action\"\n              mat-raised-button\n              color=\"primary\"\n              [disabled]=\"disableConfirmActionButton\"\n              (click)=\"closeDialog()\">Confirm\n      </button>\n    </mat-dialog-actions>\n  `,\n  styles: [`\n    ::ng-deep .mat-checkbox-label{display:flex;flex-wrap:wrap}mat-dialog-content div{margin-top:1.5rem}mat-dialog-actions{margin-top:1rem}\n  `]\n})\nexport class LegalityDialogComponent {\n\n  checkTOS: boolean;\n  checkPrivacyPolicy: boolean;\n  private _disableConfirmActionButton = false;\n\n  constructor(public dialogRef: MatDialogRef<LegalityDialogComponent>,\n              @Inject(MAT_DIALOG_DATA) public data: LegalityDialogParams) {\n  }\n\n\n  get disableConfirmActionButton(): boolean {\n    if (this.data.tosUrl && this.data.privacyPolicyUrl) {\n      this._disableConfirmActionButton = !(this.checkTOS && this.checkPrivacyPolicy);\n    } else if (this.data.tosUrl && !this.data.privacyPolicyUrl) {\n      this._disableConfirmActionButton = !this.checkTOS\n    } else if (!this.data.tosUrl && this.data.privacyPolicyUrl) {\n      this._disableConfirmActionButton = !this.checkPrivacyPolicy\n    }\n    return this._disableConfirmActionButton;\n  }\n\n  closeDialog() {\n    const result: LegalityDialogResult = {\n      checked: !this.disableConfirmActionButton,\n      authProvider: this.data.authProvider\n    };\n    this.dialogRef.close(result);\n  }\n\n}\n","import {Component, Inject, Input, OnChanges, OnDestroy, OnInit, Output, PLATFORM_ID, SimpleChanges} from '@angular/core';\nimport {AbstractControl, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {MatDialog, MatDialogRef, MatFormFieldAppearance} from '@angular/material';\nimport {AngularFireAuth} from '@angular/fire/auth';\nimport {isPlatformBrowser} from '@angular/common';\nimport {Subscription} from 'rxjs/internal/Subscription';\n\nimport {AuthProcessService, AuthProvider} from '../../services/auth-process.service';\nimport {LegalityDialogComponent} from '../../components/legality-dialog/legality-dialog.component';\nimport {LegalityDialogParams, LegalityDialogResult} from '../../interfaces/legality.dialog.intreface';\n\n\nexport const EMAIL_REGEX = new RegExp(['^(([^<>()[\\\\]\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\.,;:\\\\s@\\\"]+)*)',\n  '|(\".+\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.',\n  '[0-9]{1,3}\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+',\n  '[a-zA-Z]{2,}))$'].join(''));\n\nexport const PHONE_NUMBER_REGEX = new RegExp(/^\\+(?:[0-9] ?){6,14}[0-9]$/);\n\n@Component({\n  selector: 'ngx-auth-firebaseui',\n  template: `\n    <mat-tab-group [color]=\"color\" [selectedIndex]=\"tabIndex\">\n      <!--Reset password tab-->\n      <mat-tab *ngIf=\"passwordResetWished\" label=\"Reset Password\">\n        <form [formGroup]=\"resetPasswordFormGroup\" (ngSubmit)=\"resetPasswordFormGroup.valid && resetPassword()\">\n\n          <mat-card>\n            <mat-card-header fxLayoutAlign=\"end\">\n              <button mat-icon-button\n                      [color]=\"color\"\n                      matTooltip=\"close\"\n                      matTooltipPosition=\"above\"\n                      (click)=\"passwordResetWished = false\">\n                <mat-icon>close</mat-icon>\n              </button>\n            </mat-card-header>\n\n            <mat-card-content>\n              <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n                <mat-label>Reset e-mail address to password</mat-label>\n                <input matInput\n                       [readonly]=\"passReset\"\n                       formControlName=\"email\"\n                       title=\"Reset e-mail address to password\"\n                       required>\n                <mat-icon matSuffix [color]=\"color\">email</mat-icon>\n                <mat-error *ngIf=\"resetPasswordEmailFormControl.hasError('required')\">\n                  E-mail is required to reset the password!\n                </mat-error>\n                <mat-error *ngIf=\"resetPasswordEmailFormControl.hasError('pattern')\">\n                  Please enter a valid e-mail address\n                </mat-error>\n              </mat-form-field>\n            </mat-card-content>\n            <mat-card-actions fxLayoutAlign=\"center\">\n              <button mat-raised-button\n                      type=\"submit\"\n                      [color]=\"color\"\n                      [disabled]=\"passReset\">\n                Reset\n              </button>\n            </mat-card-actions>\n            <mat-card-footer *ngIf=\"passReset\" fxLayoutAlign=\"center\">\n              <p>Reset requested. Check your e-mail instructions.</p>\n            </mat-card-footer>\n            <mat-card-footer>\n              <mat-progress-bar *ngIf=\"authProcess.isLoading\" mode=\"indeterminate\"></mat-progress-bar>\n            </mat-card-footer>\n          </mat-card>\n        </form>\n      </mat-tab>\n\n      <!--Sign in tab-->\n      <mat-tab label=\"Sign in\">\n        <mat-card>\n          <mat-card-title>Signing in</mat-card-title>\n          <mat-card-content>\n            <form [formGroup]=\"signInFormGroup\"\n                  (ngSubmit)=\"signInFormGroup.valid &&\n                  authProcess.signInWith\n                  (authProviders.EmailAndPassword,\n                  {email:signInFormGroup.value.email, password: signInFormGroup.value.password})\">\n              <div fxLayout=\"column\" fxLayoutAlign=\"center\">\n                <mat-form-field [appearance]=\"appearance\">\n                  <mat-label>E-mail</mat-label>\n                  <input matInput\n                         placeholder=\"E-mail\"\n                         formControlName=\"email\"\n                         required>\n                  <mat-icon matSuffix [color]=\"color\">email</mat-icon>\n                  <mat-error *ngIf=\"signInEmailFormControl.hasError('required')\">\n                    E-mail is required\n                  </mat-error>\n                  <mat-error *ngIf=\"signInEmailFormControl.hasError('pattern')\">\n                    Please enter a valid e-mail address\n                  </mat-error>\n                </mat-form-field>\n\n                <mat-form-field [appearance]=\"appearance\">\n                  <mat-label>Password</mat-label>\n                  <input matInput\n                         type=\"password\"\n                         placeholder=\"Password\"\n                         minlength=\"6\"\n                         maxlength=\"25\"\n                         formControlName=\"password\"\n                         required>\n                  <mat-icon matSuffix [color]=\"color\">lock</mat-icon>\n                  <mat-hint align=\"end\" aria-live=\"polite\">\n                    {{signInFormGroup.value.password.length}} / 25\n                  </mat-hint>\n                  <mat-error *ngIf=\"sigInPasswordFormControl.hasError('required')\">\n                    Please do not forget the password\n                  </mat-error>\n                  <mat-error *ngIf=\"sigInPasswordFormControl.hasError('minlength')\">\n                    The password must be at least 6 characters long.\n                  </mat-error>\n                  <mat-error *ngIf=\"sigInPasswordFormControl.hasError('maxlength')\">\n                    The password must not exceed 25 characters\n                  </mat-error>\n                </mat-form-field>\n\n                <button mat-raised-button\n                        style=\"margin-top: 20px\"\n                        type=\"submit\"\n                        class=\"space-top\"\n                        [color]=\"color\">\n                  Log In\n                </button>\n\n              </div>\n            </form>\n\n            <div fxLayoutAlign=\"center\">\n              <button mat-button\n                      class=\"space-top\"\n                      [color]=\"color\"\n                      (click)=\"createForgotPasswordTab()\">\n                Forgot Password?\n              </button>\n            </div>\n\n          </mat-card-content>\n          <mat-card-footer *ngIf=\"authProcess.isLoading\">\n            <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n          </mat-card-footer>\n        </mat-card>\n      </mat-tab>\n\n      <!--tab register-->\n      <mat-tab label=\"Register\">\n        <mat-card>\n          <mat-card-title>Registration</mat-card-title>\n          <div *ngIf=\"!authProcess.emailConfirmationSent;then register else confirm\"></div>\n          <ng-template #register>\n            <mat-card-content fxLayout=\"column\" fxLayoutAlign=\"center\">\n              <form [formGroup]=\"signUpFormGroup\" (ngSubmit)=\"signUpFormGroup.valid &&\n              processLegalSignUP(authProvider.EmailAndPassword)\">\n                <div fxLayout=\"column\" fxLayoutAlign=\"center\">\n                  <!--name-->\n                  <mat-form-field [appearance]=\"appearance\">\n                    <!--labels will work only with @angular/material@6.2.0 -->\n                    <mat-label>Name</mat-label>\n                    <input matInput\n                           placeholder=\"Name\"\n                           minlength=\"2\"\n                           maxlength=\"30\"\n                           [formControl]=\"sigUpNameFormControl\"\n                           required>\n                    <mat-icon matSuffix [color]=\"color\">person</mat-icon>\n                    <mat-hint align=\"end\" aria-live=\"polite\">\n                      {{signUpFormGroup.value.name?.length}} / 25\n                    </mat-hint>\n                    <mat-error *ngIf=\"sigUpNameFormControl.hasError('required')\">\n                      Name is required\n                    </mat-error>\n                    <mat-error *ngIf=\"sigUpPasswordFormControl.hasError('minlength')\">\n                      The name is too short!\n                    </mat-error>\n                    <mat-error *ngIf=\"sigUpPasswordFormControl.hasError('maxlength')\">\n                      The name is too long!\n                    </mat-error>\n                  </mat-form-field>\n\n                  <!--email-->\n                  <mat-form-field [appearance]=\"appearance\">\n                    <mat-label>E-mail</mat-label>\n                    <input matInput\n                           placeholder=\"E-mail\"\n                           type=\"email\"\n                           [formControl]=\"sigUpEmailFormControl\">\n                    <mat-icon matSuffix [color]=\"color\">email</mat-icon>\n                    <mat-error *ngIf=\"sigUpEmailFormControl.hasError('required')\">\n                      E-mail is required\n                    </mat-error>\n                    <mat-error *ngIf=\"sigUpEmailFormControl.hasError('pattern')\">\n                      Please enter a valid e-mail address\n                    </mat-error>\n                  </mat-form-field>\n\n                  <!--password-->\n                  <div fxLayout=\"column\">\n\n                    <mat-form-field [appearance]=\"appearance\">\n                      <mat-label>Password</mat-label>\n                      <input matInput\n                             type=\"password\"\n                             placeholder=\"password\"\n                             name=\"password\"\n                             [formControl]=\"sigUpPasswordFormControl\"\n                             required>\n                      <mat-icon matSuffix [color]=\"color\">lock</mat-icon>\n\n                      <mat-hint align=\"end\" aria-live=\"polite\">\n                        {{signUpFormGroup.value.password?.length}} / 25\n                      </mat-hint>\n\n                      <mat-error *ngIf=\"sigUpPasswordFormControl.hasError('required')\" class=\"cut-text\">\n                        Please do not forget the password\n                      </mat-error>\n\n                      <mat-error *ngIf=\"sigUpPasswordFormControl.hasError('minlength')\" class=\"cut-text\">\n                        The password must be at least 6 characters long.\n                      </mat-error>\n                      <mat-error *ngIf=\"sigUpPasswordFormControl.hasError('maxlength')\" class=\"cut-text\">\n                        The password can not be longer than 25 characters.\n                      </mat-error>\n\n                    </mat-form-field>\n\n                    <mat-password-strength\n                      [password]=\"signUpFormGroup.value.password\"\n                      [externalError]=\"sigUpPasswordFormControl.dirty\">\n                    </mat-password-strength>\n\n                  </div>\n\n                  <button mat-raised-button\n                          style=\"margin-top: 20px\"\n                          type=\"submit\"\n                          [color]=\"color\">\n                    Register\n                  </button>\n\n                </div>\n              </form>\n\n              <button *ngIf=\"guestEnabled\"\n                      mat-button\n                      style=\"margin-top: 20px\"\n                      [color]=\"color\"\n                      (click)=\"processLegalSignUP(authProvider.ANONYMOUS)\">\n                <mat-icon>fingerprint</mat-icon>\n                continue as guest\n              </button>\n\n            </mat-card-content>\n\n            <mat-card-footer *ngIf=\"authProcess.isLoading\">\n              <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n            </mat-card-footer>\n\n          </ng-template>\n\n          <!--confirm template-->\n          <ng-template #confirm>\n            <ngx-auth-firebaseui-email-confirmation [email]=\"authProcess.emailToConfirm\"\n                                                    [goBackURL]=\"goBackURL\">\n            </ngx-auth-firebaseui-email-confirmation>\n          </ng-template>\n\n        </mat-card>\n      </mat-tab>\n    </mat-tab-group>\n    <mat-divider></mat-divider>\n    <ngx-auth-firebaseui-providers [providers]=\"providers\"></ngx-auth-firebaseui-providers>\n  `,\n  styles: [`\n    .mat-card{margin:2rem}.space-top{margin-top:.5rem}.full-width{width:100%}.cut-text{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}\n  `]\n})\n\nexport class AuthComponent implements OnInit, OnChanges, OnDestroy {\n\n  @Input()\n  providers: string[] | string = AuthProvider.ALL; //  google, facebook, twitter, github as array or all as one single string\n\n  @Input()\n  appearance: MatFormFieldAppearance;\n\n  @Input()\n  tabIndex: number | null;\n\n  @Input()\n  guestEnabled = true;\n\n  @Input()\n  tosUrl: string;\n\n  @Input()\n  privacyPolicyUrl: string;\n\n  @Input()\n  goBackURL: string;\n\n  @Input()\n  messageOnAuthSuccess: string;\n\n  @Input()\n  messageOnAuthError: string;\n\n  @Output()\n  onSuccess: any;\n\n  @Output()\n  onError: any;\n\n  authProvider = AuthProvider;\n  passwordResetWished: boolean;\n\n  public signInFormGroup: FormGroup;\n  public signUpFormGroup: FormGroup;\n  public resetPasswordFormGroup: FormGroup;\n\n  onErrorSubscription: Subscription;\n  authenticationError = false;\n\n  passReset = false;\n  dialogRef: MatDialogRef<LegalityDialogComponent>;\n\n  authProviders = AuthProvider;\n\n  signInEmailFormControl: AbstractControl;\n  sigInPasswordFormControl: AbstractControl;\n\n  sigUpNameFormControl: AbstractControl;\n  sigUpEmailFormControl: AbstractControl;\n  sigUpPasswordFormControl: AbstractControl;\n  sigUpPasswordConfirmationFormControl: AbstractControl;\n  resetPasswordEmailFormControl: AbstractControl;\n\n  constructor(@Inject(PLATFORM_ID) private platformId: Object,\n              public auth: AngularFireAuth,\n              public authProcess: AuthProcessService,\n              public dialog: MatDialog) {\n\n    this.onSuccess = authProcess.onSuccessEmitter;\n    this.onError = authProcess.onErrorEmitter;\n  }\n\n  public ngOnInit(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.onErrorSubscription = this.onError.subscribe(() => this.authenticationError = true);\n    }\n    this.updateAuthSnackbarMessages();\n    // auth form's initialization\n    this._initSignInFormGroupBuilder();\n    this._initSignUpFormGroupBuilder();\n    this._initResetPasswordFormGroupBuilder();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.messageOnAuthSuccess || changes.messageOnAuthError) {\n      this.updateAuthSnackbarMessages();\n    }\n  }\n\n  public ngOnDestroy(): void {\n    if (this.onErrorSubscription) {\n      this.onErrorSubscription.unsubscribe();\n    }\n  }\n\n  get color(): string {\n    return this.authenticationError ? 'warn' : 'primary';\n  }\n\n  public updateAuthSnackbarMessages(): void {\n    this.authProcess.messageOnAuthSuccess = this.messageOnAuthSuccess;\n    this.authProcess.messageOnAuthError = this.messageOnAuthError;\n  }\n\n  public createForgotPasswordTab() {\n    this.passwordResetWished = true;\n    setTimeout(() => this.tabIndex = 0, 100);\n  }\n\n  public processLegalSignUP(authProvider?: AuthProvider) {\n    if (this.tosUrl || this.privacyPolicyUrl) {\n      const params: LegalityDialogParams = {\n        tosUrl: this.tosUrl,\n        privacyPolicyUrl: this.privacyPolicyUrl,\n        authProvider: authProvider\n      };\n\n      this.dialogRef = this.dialog.open(LegalityDialogComponent, {data: params});\n      this.dialogRef.afterClosed().subscribe((result: LegalityDialogResult) => {\n        // console.log('this.dialogRef.afterClosed(): ', result);\n        if (result && result.checked) {\n          this._afterSignUpMiddleware(result.authProvider).then(() => this.signUpFormGroup.reset());\n        }\n        this.dialogRef = null;\n      });\n    } else {\n      this._afterSignUpMiddleware(authProvider).then(() => this.signUpFormGroup.reset());\n    }\n  }\n\n  public async signUp() {\n    return await this.authProcess.signUp\n    (\n      this.signUpFormGroup.value.name,\n      {\n        email: this.signUpFormGroup.value.email,\n        password: this.signUpFormGroup.value.password\n      }\n    );\n  }\n\n  public async signUpAnonymously() {\n    return await this.authProcess.signInWith(this.authProvider.ANONYMOUS);\n  }\n\n\n  public resetPassword() {\n    this.authProcess.resetPassword(this.resetPasswordEmailFormControl.value)\n      .then(() => this.passReset = true);\n  }\n\n  private _initSignInFormGroupBuilder() {\n    this.signInFormGroup = new FormGroup({});\n    this.signInFormGroup.registerControl('email', this.signInEmailFormControl = new FormControl('',\n      [\n        Validators.required,\n        Validators.pattern(EMAIL_REGEX)\n      ]));\n    this.signInFormGroup.registerControl('password', this.sigInPasswordFormControl = new FormControl('',\n      [\n        Validators.required,\n        Validators.minLength(6),\n        Validators.maxLength(25),\n      ]));\n  }\n\n  private _initSignUpFormGroupBuilder() {\n    this.signUpFormGroup = new FormGroup({\n      name: this.sigUpNameFormControl = new FormControl('',\n        [\n          Validators.required,\n          Validators.minLength(2),\n          Validators.maxLength(30),\n        ]),\n      email: this.sigUpEmailFormControl = new FormControl('',\n        [\n          Validators.required,\n          Validators.pattern(EMAIL_REGEX)\n        ]),\n      password: this.sigUpPasswordFormControl = new FormControl('',\n        [\n          Validators.required,\n          Validators.minLength(6),\n          Validators.maxLength(25),\n        ])\n    });\n  }\n\n  private _initResetPasswordFormGroupBuilder() {\n    this.resetPasswordFormGroup = new FormGroup({\n      email: this.resetPasswordEmailFormControl = new FormControl('',\n        [\n          Validators.required,\n          Validators.pattern(EMAIL_REGEX)\n        ])\n    });\n  }\n\n  private _afterSignUpMiddleware(authProvider?: AuthProvider) {\n    if (authProvider === this.authProvider.ANONYMOUS) {\n      return this.signUpAnonymously();\n    }\n    return this.signUp();\n  }\n\n}\n","import {Component, EventEmitter, Inject, Input, OnInit, Output} from '@angular/core';\nimport {AngularFireAuth} from '@angular/fire/auth';\nimport {MatFormFieldAppearance, MatSnackBar} from '@angular/material';\nimport {AuthProcessService} from '../../services/auth-process.service';\nimport {AbstractControl, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {EMAIL_REGEX, PHONE_NUMBER_REGEX} from '../auth/auth.component';\nimport {User} from 'firebase';\nimport {FirestoreSyncService} from '../../services/firestore-sync.service';\nimport {NgxAuthFirebaseUIConfig, NgxAuthFirebaseUIConfigToken} from '../../ngx-auth-firebase-u-i.module';\n\n@Component({\n  selector: 'ngx-auth-firebaseui-user',\n  template: `\n    <div *ngIf=\"auth.authState| async as user; then authenticated else none\">\n\n    </div>\n\n    <ng-template #authenticated>\n      <mat-card *ngIf=\"auth.user | async as user\">\n        <!--<form [formGroup]=\"updateFormGroup\" >-->\n        <!--card header-->\n        <mat-card-header fxLayout=\"column\" fxLayoutAlign=\"center center\">\n\n          <img mat-card-avatar [src]=\"authProcess?.getUserPhotoUrl()\">\n\n          <div *ngIf=\"user.emailVerified; then emailVerified else emailNotVerified\"></div>\n          <ng-template #emailVerified>\n            <mat-icon color=\"primary\"\n                      matTooltip=\"email is verified\"\n                      matTooltipPosition=\"after\">\n              verified_user\n            </mat-icon>\n          </ng-template>\n          <ng-template #emailNotVerified>\n            <mat-icon color=\"warn\"\n                      matTooltip=\"email is not verified\"\n                      matTooltipPosition=\"after\">\n              warning\n            </mat-icon>\n          </ng-template>\n\n        </mat-card-header>\n\n        <!--card content-->\n        <mat-card-content *ngIf=\"editMode; then edit else readonly\">\n        </mat-card-content>\n\n        <ng-template #edit>\n          <form [formGroup]=\"updateFormGroup\" (submit)=\"save()\">\n\n            <mat-card-content fxLayout=\"column\" fxLayoutAlign=\"center center\">\n              <div fxLayoutAlign=\"center\">\n                <button mat-raised-button color=\"warn\" class=\"edit-button\"\n                        (click)=\"changeEditMode()\">\n                  cancel\n                </button>\n              </div>\n\n              <!--name-->\n              <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n                <mat-label>Name</mat-label>\n                <input matInput\n                       placeholder=\"Name\"\n                       [formControl]=\"updateNameFormControl\"\n                       [value]=\"user.displayName\">\n                <mat-icon matSuffix>person</mat-icon>\n                <mat-hint align=\"end\" aria-live=\"polite\">\n                  {{updateNameFormControl.value.length}} / 25\n                </mat-hint>\n                <mat-error *ngIf=\"updateNameFormControl.hasError('required')\">\n                  Name is required\n                </mat-error>\n              </mat-form-field>\n\n              <!--email-->\n              <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n                <mat-label>E-mail</mat-label>\n                <input matInput\n                       placeholder=\"E-mail\"\n                       [formControl]=\"updateEmailFormControl\"\n                       [value]=\"user.email\">\n                <mat-icon matSuffix>email</mat-icon>\n                <mat-error *ngIf=\"updateEmailFormControl.hasError('required')\">\n                  E-mail is required {{updateEmailFormControl.value}}\n                </mat-error>\n                <mat-error *ngIf=\"updateEmailFormControl.hasError('pattern')\">\n                  Please enter a valid e-mail address {{updateEmailFormControl.value}}\n                </mat-error>\n              </mat-form-field>\n\n              <!--phone number-->\n              <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n                <mat-label>Phone number</mat-label>\n                <input matInput\n                       type=\"number\"\n                       placeholder=\"Phone number\"\n                       [formControl]=\"updatePhoneNumberFormControl\"\n                       [value]=\"user.phoneNumber\">\n                <mat-icon matSuffix>phone</mat-icon>\n                <mat-hint align=\"end\" aria-live=\"polite\">\n                  The phone number is international. Therefore, it should start with a + sign or 00,\n                  followed by the country code, - and national number e.g: +49-12345678 or 0041-1234567890\n\n                  NOTE : the phone number must be a valid phone credential !!\n                </mat-hint>\n                <mat-error *ngIf=\"updatePhoneNumberFormControl.hasError('pattern')\">\n                  Please enter a valid phone number\n                </mat-error>\n              </mat-form-field>\n\n            </mat-card-content>\n\n            <mat-card-actions fxLayout=\"column\">\n              <button mat-button\n                      color=\"primary\"\n                      type=\"submit\">\n                Save changes\n              </button>\n            </mat-card-actions>\n          </form>\n        </ng-template>\n\n        <ng-template #readonly>\n          <div fxLayoutAlign=\"center\">\n            <button mat-raised-button color=\"primary\" class=\"edit-button\"\n                    (click)=\"changeEditMode()\">\n              edit\n            </button>\n          </div>\n\n          <!--name-->\n          <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n            <mat-label>Name</mat-label>\n            <input matInput\n                   placeholder=\"Name\"\n                   [value]=\"user.displayName\"\n                   [disabled]=\"!editMode\">\n            <mat-icon matSuffix color=\"primary\">person</mat-icon>\n          </mat-form-field>\n\n          <!--email-->\n          <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n            <mat-label>E-mail</mat-label>\n            <input matInput\n                   placeholder=\"E-mail\" [value]=\"user.email\"\n                   [disabled]=\"!editMode\">\n            <mat-icon matSuffix color=\"primary\">email</mat-icon>\n          </mat-form-field>\n\n          <!--phone number-->\n          <mat-form-field class=\"full-width\" [appearance]=\"appearance\">\n            <mat-label>Phone number</mat-label>\n            <input matInput\n                   placeholder=\"Phone number\"\n                   [value]=\"user.phoneNumber\"\n                   [disabled]=\"!editMode\">\n            <mat-icon matSuffix color=\"primary\">phone</mat-icon>\n          </mat-form-field>\n\n          <mat-card-actions fxLayout=\"column\">\n            <button *ngIf=\"canLogout\" mat-button color=\"primary\" (click)=\"auth.auth.signOut()\">Sign out</button>\n            <button *ngIf=\"canDeleteAccount\" mat-button color=\"warn\" (click)=\"deleteAccount()\">Delete account</button>\n          </mat-card-actions>\n\n        </ng-template>\n\n      </mat-card>\n\n    </ng-template>\n\n\n    <ng-template #none>\n      <mat-card class=\"none-card\" fxLayout=\"row\" fxLayoutAlign=\"center center\">\n        <mat-card-content fxLayout=\"row\" fxLayoutAlign=\"center center\">\n          <mat-icon color=\"accent\">warning</mat-icon>\n          <span>You are not logged in!</span>\n        </mat-card-content>\n      </mat-card>\n    </ng-template>\n  `,\n  styles: [`\n    .edit-button{margin:1rem}.full-width{width:100%}.cut-text{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.none-card{min-height:430px}.none-card span{font-size:24px;text-align:center;color:rgba(0,0,0,.54)}\n  `]\n})\nexport class UserComponent implements OnInit {\n\n  @Input()\n  editMode: boolean;\n\n  @Input()\n  canLogout = true;\n\n  @Input()\n  canDeleteAccount = true;\n\n  @Input()\n  appearance: MatFormFieldAppearance;\n\n  @Output()\n  onAccountDeleted: EventEmitter<void> = new EventEmitter();\n\n  updateFormGroup: FormGroup;\n  updateNameFormControl: AbstractControl;\n  updateEmailFormControl: AbstractControl;\n  updatePhoneNumberFormControl: AbstractControl;\n  updatePasswordFormControl: AbstractControl;\n\n  constructor(@Inject(NgxAuthFirebaseUIConfigToken)\n              public config: NgxAuthFirebaseUIConfig,\n              public auth: AngularFireAuth,\n              public authProcess: AuthProcessService,\n              private _fireStoreService: FirestoreSyncService,\n              private snackBar: MatSnackBar) {\n  }\n\n  ngOnInit() {\n  }\n\n  protected initUpdateFormGroup() {\n    const currentUser: User = this.auth.auth.currentUser;\n    this.updateFormGroup = new FormGroup({\n      name: this.updateNameFormControl = new FormControl(\n        {value: currentUser.displayName, disabled: true},\n        [\n          Validators.required,\n          Validators.minLength(2),\n          Validators.maxLength(25),\n        ]\n      ),\n\n      email: this.updateEmailFormControl = new FormControl(\n        {value: currentUser.email, disabled: true},\n        [\n          Validators.required,\n          Validators.pattern(EMAIL_REGEX)\n        ]),\n\n      phoneNumber: this.updatePhoneNumberFormControl = new FormControl('',\n        [Validators.pattern(PHONE_NUMBER_REGEX)])\n    });\n\n    this.updateFormGroup.enable();\n  }\n\n  changeEditMode() {\n    this.editMode = !this.editMode;\n\n    this.editMode ? this.initUpdateFormGroup() : this.reset();\n  }\n\n  reset() {\n    this.updateFormGroup.reset();\n    this.updateFormGroup.disable();\n    this.updateFormGroup = null;\n  }\n\n  // todo: 31.3.18\n  async save() {\n    if (this.updateFormGroup.dirty) {\n      const user = this.auth.auth.currentUser;\n      // user.updateProfile()\n      // user.updateEmail()\n      // console.log('form = ', this.updateFormGroup);\n\n      const snackBarMsg: string[] = [];\n\n      try {\n        if (this.updateNameFormControl.dirty) {\n          await user.updateProfile({displayName: this.updateNameFormControl.value, photoURL: null});\n          snackBarMsg.push(`your name has been update to ${user.displayName}`);\n        }\n\n        if (this.updateEmailFormControl.dirty) {\n          await user.updateEmail(this.updateEmailFormControl.value);\n          snackBarMsg.push(`your email has been update to ${user.email}`);\n        }\n\n        if (this.updatePhoneNumberFormControl.dirty) {\n          await user.updatePhoneNumber(this.updatePhoneNumberFormControl.value);\n          console.log('phone number = ', this.updatePhoneNumberFormControl.value);\n          snackBarMsg.push(`your phone number has been update to ${user.phoneNumber}`);\n        }\n\n        if (this.config.enableFirestoreSync) {\n          await this._fireStoreService.updateUserData(this.authProcess.parseUserInfo(user));\n        }\n\n      } catch (error) {\n        error.message ? this.snackBar.open(error.message, 'Ok') : this.snackBar.open(error, 'Ok');\n        console.error(error);\n        console.error(error.code);\n        console.error(error.message);\n      }\n\n\n      if (snackBarMsg.length > 0) {\n        this.snackBar.open(snackBarMsg.join('\\\\n'), 'Ok');\n      }\n      // this.updateFormGroup.reset();\n    }\n\n    this.editMode = false;\n  }\n\n  /**\n   * Delete the account of the current firebase user\n   *\n   * On Success, emit the <onAccountDeleted> event and toast a msg!#\n   * Otherwise, log the and toast and error msg!\n   *\n   */\n  async deleteAccount() {\n    try {\n      const user = this.auth.auth.currentUser;\n\n      await this.authProcess.deleteAccount();\n      if (this.config.enableFirestoreSync) {\n        await this._fireStoreService.deleteUserData(user.uid);\n      }\n      this.onAccountDeleted.emit();\n      this.editMode = false;\n      this.snackBar.open('Your account has been successfully deleted!', 'OK', {\n        duration: 5000\n      })\n    } catch (error) {\n      console.log('Error while delete user\\'s account', error);\n      this.snackBar.open('Error occurred while deleting your account!', 'OK', {\n        duration: 5000\n      })\n    }\n  }\n\n}\n","import {Component, Input} from '@angular/core';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {MatIconRegistry} from '@angular/material';\nimport {AuthProcessService, AuthProvider} from '../../services/auth-process.service';\n\nexport enum Theme {\n  DEFAULT = 'default',\n  CLASSIC = 'classic',\n  STROKED = 'stroked',\n  FAB = 'fab',\n  MINI_FAB = 'mini-fab',\n  RAISED = 'raised',\n}\n\nexport enum Layout {\n  ROW = 'row',\n  COLUMN = 'column'\n}\n\n@Component({\n  selector: 'ngx-auth-firebaseui-providers',\n  template: `\n    <div [ngSwitch]=\"theme\">\n\n      <!--default icon buttons-->\n      <div *ngSwitchDefault\n           [fxLayout]=\"layout\"\n           fxLayout.xs=\"column\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-button\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          <mat-icon svgIcon=\"google-colored\"></mat-icon>\n          Google\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-button\n                class=\"facebook-filled\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          <mat-icon svgIcon=\"facebook\"></mat-icon>\n          Facebook\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-button\n                class=\"twitter-filled\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          <mat-icon svgIcon=\"twitter\"></mat-icon>\n          Twitter\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-button\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          <mat-icon svgIcon=\"github\"></mat-icon>\n          GitHub\n        </button>\n      </div>\n\n      <!--classic-->\n      <div *ngSwitchCase=\"themes.CLASSIC\"\n           class=\"buttons-classic\"\n           [fxLayout]=\"layout\"\n           fxLayout.xs=\"column\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-button\n                class=\"google-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          Google\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-button\n                class=\"facebook-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          Facebook\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-button\n                class=\"twitter-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          Twitter\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-button\n                class=\"github-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          GitHub\n        </button>\n      </div>\n\n      <!--stroked-->\n      <div *ngSwitchCase=\"themes.STROKED\"\n           class=\"buttons-classic\"\n           [fxLayout]=\"layout\"\n           fxLayout.xs=\"column\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-stroked-button\n                class=\"google-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          Google\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-stroked-button\n                class=\"facebook-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          Facebook\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-stroked-button\n                class=\"twitter-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          Twitter\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-stroked-button\n                class=\"github-classic\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          GitHub\n        </button>\n      </div>\n\n      <!--raised-->\n      <div *ngSwitchCase=\"themes.RAISED\"\n           class=\"buttons-raised\"\n           [fxLayout]=\"layout\"\n           fxLayout.xs=\"column\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-raised-button\n                class=\"google-raised\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          Google\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-raised-button\n                class=\"facebook-raised\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          Facebook\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-raised-button\n                class=\"twitter-raised\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          Twitter\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-raised-button\n                class=\"github-raised\"\n                [ngClass.xs]=\"{'space-full-xs':true}\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          GitHub\n        </button>\n      </div>\n\n      <!--fab-->\n      <div *ngSwitchCase=\"themes.FAB\"\n           class=\"buttons-raised\"\n           [fxLayout]=\"layout\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-fab\n                class=\"google-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          <mat-icon svgIcon=\"google\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-fab\n                class=\"facebook-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          <mat-icon svgIcon=\"facebook\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-fab\n                class=\"twitter-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          <mat-icon svgIcon=\"twitter\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-fab\n                class=\"github-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          <mat-icon svgIcon=\"github\"></mat-icon>\n        </button>\n      </div>\n\n      <!--mini-fab-->\n      <div *ngSwitchCase=\"themes.MINI_FAB\"\n           class=\"buttons-raised\"\n           [fxLayout]=\"layout\"\n           fxLayoutAlign.xs=\"center center\"\n           [fxLayoutAlign]=\"layout == 'row' ? 'space-around center' : 'stretch'\">\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Google)\"\n                mat-mini-fab\n                class=\"google-raised\"\n                fxFlexAlign=\"center\"\n                (click)=\"authProcess.signInWith(authProvider.Google)\">\n          <mat-icon svgIcon=\"google\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Facebook)\"\n                mat-mini-fab\n                class=\"facebook-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Facebook)\">\n          <mat-icon svgIcon=\"facebook\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Twitter)\"\n                mat-mini-fab\n                class=\"twitter-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Twitter)\">\n          <mat-icon svgIcon=\"twitter\" class=\"icon-white\"></mat-icon>\n        </button>\n        <button *ngIf=\"providers === authProvider.ALL || providers.includes(authProvider.Github)\"\n                mat-mini-fab\n                class=\"github-raised\"\n                (click)=\"authProcess.signInWith(authProvider.Github)\">\n          <mat-icon svgIcon=\"github\"></mat-icon>\n        </button>\n      </div>\n    </div>\n  `,\n  styles: [`\n    :host{display:block}:host .mat-icon{vertical-align:inherit}.space-full-xs{width:100%;margin:.4rem}.facebook-filled mat-icon{fill:#385899}.twitter-filled mat-icon{fill:#1da1f2}.buttons-raised button{color:#fff!important}.buttons-raised .google-raised{background-color:#db4437}.buttons-raised .facebook-raised{background-color:#385899}.buttons-raised .twitter-raised{background-color:#1da1f2}.buttons-raised .github-raised{background-color:#000}.buttons-classic button.google-classic{color:#db4437!important}.buttons-classic .facebook-classic{color:#385899!important}.buttons-classic .twitter-classic{color:#1da1f2!important}.buttons-classic .github-classic{color:#000!important}.icon-white{color:#fff}.icon-white mat-icon{fill:#fff}\n  `]\n})\nexport class AuthProvidersComponent {\n\n  @Input()\n  theme: string;\n  // theme: string = Theme.DEFAULT;\n\n  @Input()\n  layout: string = Layout.ROW;\n\n  @Input()\n  providers: string[] | string = AuthProvider.ALL; //  google, facebook, twitter, github\n\n  themes = Theme;\n  authProvider = AuthProvider;\n\n  constructor(public authProcess: AuthProcessService,\n              private _iconRegistry: MatIconRegistry,\n              private _sanitizer: DomSanitizer) {\n    _iconRegistry\n      .addSvgIcon('google',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/mdi/google.svg'))\n      .addSvgIcon('google-colored',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/google.svg'))\n      .addSvgIcon('facebook',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/mdi/facebook.svg'))\n      .addSvgIcon('twitter',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/mdi/twitter.svg'))\n      .addSvgIcon('github',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/mdi/github-circle.svg'))\n      .addSvgIcon('phone',\n        _sanitizer.bypassSecurityTrustResourceUrl('/assets/phone.svg'));\n  }\n\n}\n","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'ngx-auth-firebaseui-email-confirmation',\n  template: `\n    <mat-card-content fxLayout=\"column\" fxLayoutAlign=\"center center\">\n      <mat-icon>email</mat-icon>\n      <div class=\"title\">\n        Confirm your e-mail address!\n      </div>\n      <div class=\"subtitle\">\n        <p>A confirmation e-mail has been sent to\n          <b><strong>{{email}}</strong></b>.</p>\n        <p>Check your inbox and click on the link\n           \"Confirm my e-mail\" to confirm your e-mail address.</p>\n      </div>\n    </mat-card-content>\n\n    <mat-card-actions *ngIf=\"goBackURL\"\n                      fxLayoutAlign=\"center center\">\n      <a mat-button\n         color=\"primary\"\n         [href]=\"goBackURL\">\n        Go back\n      </a>\n    </mat-card-actions>\n  `,\n  styles: [`\n    .material-icons{font-size:4rem}.mat-icon{height:4rem;width:4rem;color:rgba(0,0,0,.54)}.title{font-size:20px;margin-top:16px}.subtitle{margin:16px auto;max-width:300px;color:rgba(0,0,0,.54);font-size:15px;text-align:center}.subtitle p{display:block;-webkit-margin-before:1em;-webkit-margin-after:1em;-webkit-margin-start:0;-webkit-margin-end:0}\n  `]\n})\nexport class EmailConfirmationComponent {\n\n  @Input()\n  email: string;\n\n  @Input()\n  goBackURL: string;\n\n}\n","// import * as firebase from 'firebase';\n// import GoogleAuthProvider = firebase.auth.GoogleAuthProvider;\n// import FacebookAuthProvider = firebase.auth.FacebookAuthProvider;\n// import TwitterAuthProvider = firebase.auth.TwitterAuthProvider;\n// import GithubAuthProvider = firebase.auth.GithubAuthProvider;\nimport AuthProvider = firebase.auth.AuthProvider;\n\nexport interface NgxAuthFirebaseUIConfig {\n  // authNextURL?: string, // popup or redirect\n  // tosUrl?: string, // term of services url\n  // ppUrl?: string, // privacy policy url\n  // authProviders?: Array<AuthProvider>,\n  // languageCode?: string, // todo: 28.3.18\n  authGuardFallbackURL?: string,\n  enableFirestoreSync?: boolean,\n  toastMessageOnAuthSuccess?: boolean,\n  toastMessageOnAuthError?: boolean\n}\n\nexport const defaultAuthFirebaseUIConfig: NgxAuthFirebaseUIConfig = {\n  // authMethod: 'redirect',\n  // authProviders: [new GoogleAuthProvider(), new FacebookAuthProvider(), new TwitterAuthProvider(), new GithubAuthProvider()],\n  authGuardFallbackURL: '/',\n  enableFirestoreSync: true,\n  toastMessageOnAuthSuccess: true,\n  toastMessageOnAuthError: true\n};\n\n","import { Inject, Injectable } from '@angular/core'\nimport { CanActivate, Router } from '@angular/router'\nimport { map } from 'rxjs/operators'\nimport { Observable } from 'rxjs'\n\nimport {\n  AuthProcessService,\n  NgxAuthFirebaseUIConfig,\n  NgxAuthFirebaseUIConfigToken,\n} from '../ngx-auth-firebase-u-i.module'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoggedInGuard implements CanActivate {\n  constructor(\n    @Inject(NgxAuthFirebaseUIConfigToken)\n    private config: NgxAuthFirebaseUIConfig,\n    private router: Router,\n    private auth: AuthProcessService,\n  ) {}\n\n  canActivate(): Observable<boolean> {\n    return this.auth.afa.user.pipe(\n      map(res => {\n        if (res) {\n          return true\n        }\n        this.router.navigate([`/${this.config.authGuardFallbackURL}`]);\n        return false\n      }),\n    )\n  }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule, ModuleWithProviders, InjectionToken, Inject} from '@angular/core';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {HttpClientModule} from '@angular/common/http';\nimport {AuthComponent} from './components/auth/auth.component';\nimport {UserComponent} from './components/user/user.component';\nimport {AuthProvidersComponent} from './components/providers/auth.providers.component';\nimport {EmailConfirmationComponent} from './components/email-confirmation/email-confirmation.component';\nimport {defaultAuthFirebaseUIConfig, NgxAuthFirebaseUIConfig} from './interfaces/config.interface';\nimport {FirestoreSyncService} from './services/firestore-sync.service';\nimport {AuthProcessService} from './services/auth-process.service';\nimport {FirebaseAppConfig, FirebaseOptionsToken, FirebaseNameOrConfigToken} from '@angular/fire';\nimport {AngularFireAuthModule} from '@angular/fire/auth';\nimport {FlexLayoutModule} from '@angular/flex-layout';\nimport {\n  MatButtonModule,\n  MatCardModule,\n  MatChipsModule,\n  MatDialogModule,\n  MatDividerModule,\n  MatIconModule,\n  MatInputModule,\n  MatSnackBarModule,\n  MatTabsModule,\n  MatTooltipModule,\n  MatProgressSpinnerModule,\n  MatProgressBarModule,\n  MatCheckboxModule\n} from '@angular/material';\nimport {AngularFirestoreModule} from '@angular/fire/firestore';\nimport {MatPasswordStrengthModule} from '@angular-material-extensions/password-strength';\nimport {LegalityDialogComponent} from './components/legality-dialog/legality-dialog.component';\nimport {LoggedInGuard} from './guards/logged-in.guard';\n\n// Export module's public API\n// components\nexport {AuthComponent} from './components/auth/auth.component';\nexport {UserComponent} from './components/user/user.component';\nexport {AuthProvidersComponent, Theme, Layout} from './components/providers/auth.providers.component';\nexport {LegalityDialogComponent} from './components/legality-dialog/legality-dialog.component';\n// services\nexport {AuthProcessService, AuthProvider} from './services/auth-process.service';\nexport {FirestoreSyncService} from './services/firestore-sync.service';\n\n// guards\nexport {LoggedInGuard} from './guards/logged-in.guard';\n// interfaces\nexport {NgxAuthFirebaseUIConfig} from './interfaces/config.interface';\n\nexport const NgxAuthFirebaseUIConfigToken = new InjectionToken<NgxAuthFirebaseUIConfig>('NgxAuthFirebaseUIConfig');\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    FlexLayoutModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatTabsModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSnackBarModule,\n    MatDividerModule,\n    MatChipsModule,\n    MatTooltipModule,\n    MatDialogModule,\n    MatCheckboxModule,\n    MatProgressSpinnerModule,\n    MatProgressBarModule,\n    MatDialogModule,\n    MatPasswordStrengthModule,\n    AngularFireAuthModule,\n    AngularFirestoreModule,\n  ],\n  exports: [\n    AuthComponent,\n    UserComponent,\n    AuthProvidersComponent,\n    EmailConfirmationComponent,\n    // LoggedInGuard,\n    AngularFireAuthModule,\n    AngularFirestoreModule\n  ],\n  declarations: [\n    AuthComponent,\n    UserComponent,\n    AuthProvidersComponent,\n    EmailConfirmationComponent,\n    LegalityDialogComponent\n  ],\n  entryComponents: [\n    LegalityDialogComponent\n  ]\n})\n\n\nexport class NgxAuthFirebaseUIModule {\n  static forRoot(configFactory: FirebaseAppConfig,\n                 appNameFactory?: () => string,\n                 config?: NgxAuthFirebaseUIConfig): ModuleWithProviders {\n    return {\n      ngModule: NgxAuthFirebaseUIModule,\n      providers:\n        [\n          {\n            provide: FirebaseOptionsToken,\n            useValue: configFactory\n          },\n          {\n            provide: FirebaseNameOrConfigToken,\n            useFactory: appNameFactory\n          },\n          {\n            provide: NgxAuthFirebaseUIConfigToken,\n            useValue: config\n          },\n          AuthProcessService,\n          FirestoreSyncService,\n          LoggedInGuard\n        ],\n    };\n  }\n\n  constructor(@Inject(NgxAuthFirebaseUIConfigToken)\n              public config: NgxAuthFirebaseUIConfig) {\n    this.config = Object.assign(defaultAuthFirebaseUIConfig, this.config);\n  }\n}\n"],"names":["AuthProcessService","AuthProvider","UserComponent","LoggedInGuard"],"mappings":"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"}